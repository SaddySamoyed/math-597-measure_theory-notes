\documentclass[lang=cn,11pt]{elegantbook}
\usepackage[utf8]{inputenc}
\usepackage[UTF8]{ctex}
\usepackage{amsmath}%
\usepackage{amssymb}%
\usepackage{graphicx}
\usepackage{pdfpages}

\title{Math 597: advanced Real Analysis}
\subtitle{Following Folland' book.}

\begin{document}
\frontmatter
\tableofcontents
\mainmatter



\chapter*{Prologue}
\noindent In this Prologue, we will only state important prerequisites that we should know without proving them, for the sake of time saving.
\section{set theory}
\begin{definition}{$\limsup$ and $\liminf$ of of a sequence of sets}
$$
\limsup E_n = \intsec_{k=1}^\infty \union_{n=k}^\infty E_n
$$
$$
\liminf E_n = \union_{k=1}^\infty \intsec_{n=k}^\infty E_n
$$
\end{definition}
limsup represent the elements that occur in infinitely many $E_n$; and liminf represent the elements that occur in all but finitely many $E_n$.


    
\begin{definition}{Cartesian product}
Let $A$ be some index set, define
    $$
    \prod_{\alpha \in A} X_\alpha := \{ f: A\rar \union_{\alpha \in A} X_\alpha \mid f(\alpha) \in X_\alpha \forall \alpha   \}
    $$
\end{definition}
Notice that if all $X_\alpha = Y$ for a fixed $Y$, then we have $\prod_{\alpha \in A} X_\alpha = Y^A$.

\section{ordering}
\begin{definition}{partial ordering, linear ordering}
    A partial ordering on a nonempty set $X$ is a relation $R$ that is 
    \begin{enumerate}
        \item transitive: $xRy, yRz \implies xRz$
        \item reflexitive: $xRx \; \forall x$
        \item antisymmetric: $xRy,yRx \implies x=y$
    \end{enumerate}
    A linear ordering $R$ is a partial ordering that also satisfies:
    \begin{enumerate}[resume]
        \item strongly connected: $\forall x,y \in X$, either $xRy$ or $yRx$.
    \end{enumerate}
\end{definition}



\begin{axiom}{The Hausdorff Maximal Principle}\label{The Hausdorff Maximal Principle}
Every partially ordered set has a maximal linearly ordered subset. (i.e. there is a linearly ordered subset s.t. no other subset properly including it is linearly ordered.)
\end{axiom}

\begin{definition}{maximal/minimal element}
    A maximal element $x \in X$ means that no other element is greater than it. (notice: \textbf{It is possible that there exists another element that cannot be compared with it. The definition only says they cannot be greater than it.})\\
    Dually can define minimal element.
\end{definition}
\begin{axiom}{Zorn's Lemma} \label{Zorn's Lemma}
If $X$ is a partially ordered set and every linearly ordered subset has an upper bound, then $X$ has a maximal element.
\end{axiom}
\begin{remark}
    Zorn's Lemma and the Hausdorff Maximal Principle can imply each other.
\end{remark}

\begin{definition}{well ordering}
If $X$ is linearly ordered and every nonempty subset has a \textbf{unique minimal element}, then $X$ is said to be \textbf{well ordered}.
\end{definition}


\begin{lemma}{well ordering principle}
    Every nonempty set can be well ordered.
\end{lemma}

\begin{corollary}{Axiom of choice}
    The Cartesian product of a nonempty collection of nonempty sets is nonempty.
\end{corollary}

\section{cardinality}
\begin{proposition}
    Let $X$ be any set. We must have $\card(\cP(X)) > \card(X)$
\end{proposition}

\begin{definition}
 $$\mathfrak{c} := \card(\bR)$$
\end{definition}

\begin{proposition}
    \begin{equation}
        \card(\cP(\bN)) = \mathfrak{c}
    \end{equation}
\end{proposition}
\begin{proof}
    Using base-2 expansion, can create a bijective function from $\cP(\bN)$ to $[0,1]$.
\end{proof}


\begin{proposition}
    Given $f: X \rar [0,\infty)$, $A:= \{ f(x)>0 \}$, if $A$ is uncountable, then $\sum_{x \in X}f(x) = \infty$
\end{proposition}


\section{topology in metric space}
\begin{definition}{dense, nowhere dense, separable}
We say $E \sub X$ is dense in $X$ if $\overline{E} = X$.\\
We say $E \sub X$ is nowhere dense in $X$ if 
$\overline{E} = \emptyset $.\\
We say $X$ is separable if it has a countable dense subset.
\end{definition}


\begin{proposition}
    TFAE for metric spaces:
    \begin{enumerate}
        \item $x \in \overline{E}$.
        \item Every open ball centered at $x$ has nonempty intersection with $E$.
        \item There is a seq in $E$ converging to $x$.
    \end{enumerate}
\end{proposition}


\begin{definition}{Cauchy, complete}
    A sequence in metric space $X$ is said to be Cauchy if $d(x_n,x_m) \rar 0$ as $n,m \rar \infty$.\\
    A subset $E\sub E$ is said to be complete if every Cauchy sequence in $E$ converges.
\end{definition}

\begin{proposition}
    Complete is a stronger condition than closed, in any metric space. And a closed subset of a complete metric space is complete.
\end{proposition}

\begin{theorem}
    TFAE for metric spaces:
    \begin{enumerate}
        \item $E$ is complete and totally bounded.
        \item $E$ is compact.
        \item $E$ is sequentially compact. (Every sequence in $E$ has a subseq converging to some point in $E$.)
    \end{enumerate}
\end{theorem}


\chapter{$\sigma$-algebra}
\noindent 我们在 395 中已经证明: 在 $\bR$ 上不存在一个 measure function $\mu : \cP(\bR) \rar [0,\infty]$ satisfying:
\begin{enumerate}
    \item $\mu(\emptyset) = 0$;
    \item translate invariant
    \item countably additivite
\end{enumerate}

\noindent 因而, 对于比如 $\bR$ 的这种无法在其幂集上定义良好的 measure function 的集合, 我们要定义一个 $\cA \sub \cP(X)$, 使得我们能在这个 power set 的子集上, 定义一个 make sense 的 measure.\\\\
\noindent 
首先, 为了对于一个任意的集合 $X$ 都能在其上定义 measure, 我们要考虑在 $X$ 的一个什么样的子集簇上有希望定义这样的 measure. 

\begin{definition}{algera, $\sigma$-algebra}
对于 set $X$, $S \sub \cP(X)$ 被称为 $X$ 上的一个 $\sigma$-algebra, if 其满足:
\begin{enumerate}
    \item $\emptyset \in X$;
    \item \textbf{closed under complement}: if $E \in S$ then $X \setminus E \in S$;
    \item \textbf{closed under countable union}: if $E_1,E_2,\cdots \in S$ then $\union_{k=1}^\infty E_k \in S$.
\end{enumerate}
如果第三条并不满足, 而是只满足 \textbf{closed under finite union}, 则称 $S$ 是 $X$ 上的一个 algebra. 当然, $\sigma$-algebra 是比 algebra 严格更强的条件.
\end{definition}

\noindent 我们定义 $X$ 的一个子集簇为一个 $\sigma$-algebra 如果它包含空集并 closed under complement and countable union. 但这并不是 $\sigma$-algebra 的全部性质. 这三个性质还蕴涵了: $\sigma$-algebra 也一定包含 $X$, 且 \textbf{closed under set difference}, \textbf{symmetric difference} 以及 \textbf{countable intersection}. \\
\noindent \textbf{对于 algebra, 它也有以上的所有性质的 finite version.}


\begin{theorem}{$\sigma$-algebra also closed under set difference, symmetric difference and countable intersection}
    Let $S$ be a $\sigma$-algebra on set $X$.\\
    Claim: 
    \begin{enumerate}
        \item $X \in S$
        \begin{proof}
            Directly from def.
        \end{proof}
        \item $D,E \in S \implies D\cup E, D\cap E, D \setminus E \in S$
        \begin{proof}
            union: from def by leaving others as $\emptyset$; \\intersection: $$(D\cap E)^C = D^C \cup E^C \in S$$
            setminus: $$ D\setminus E = D \cap (X \setminus E) \in S$$    
        \end{proof}
        \item $D,E \in S \implies D \Delta S\in S$
        \begin{proof}
        $$
        D \Delta E = (D \setminus E) \union (E \setminus D)
        $$
        \end{proof}
        \item $A_1,A_2,\cdots \in S \implies \intsec_{i=1}^\infty A_i \in S$
        \begin{proof}
            $$(\intsec_{n=1}^\infty )^C = \union_{n=1}^\infty E_n ^C \in S  $$
        \end{proof}
    \end{enumerate}
\end{theorem}

\begin{remark}
    我们发现 $\sigma$-algerbra 很像是 topology. 实际上 $\sigma$-algerbra 和 topology 的区别就是: $\sigma$-algebra 只保证了 closed under countable union 而 topology closed under any union; topology 只保证 closed under finite intersection 而 $\sigma$-algebra closed under countable intersection.
\end{remark}


\begin{lemma}{任意 $\sigma$-algebra 的 intersection 仍是 $\sigma$-algebra}
Let $\{S_\alpha \}_{\alpha \in A}$ be a collection of $\sigma$-algebra on $X$, then $\intsec_{\alpha \in A} S_\alpha$ is a $\sigma$-algebra on $X$. 
\end{lemma}
\begin{proof}
    这是个 trivial proof. 但是它具有一定理解上的启发.\\
    我们对 $\sigma$-algebra 有一个直观理解: 如果我们想把一些集合做成一个 $\sigma$-algebra, 那么首先我们把它们的补集放进这个 $\sigma$-algebra 里, 其次我们把这些集合的 up to countable 的任意组合的并集也放进这个 $\sigma$-algebra 里.\\
    因而即便我们把一些 $\sigma$-algebra 给 intersect 起来, 其中每个集合的补集和这些集合的 up to ctbl 的任意组合的并集也在这个 intersection 里.\\
    这是个重要的直观理解. 我们想到, 如果我们要把一个 sigma-algebra 里的一部分去掉，并保持它仍然是一个 sigma-algebra，那么我们得把这些集合的补集, 以及能够 ctbly union 成这些集合的小集合也去掉, 并对这些小集合也 recursively 进行这个操作.
\end{proof}

\begin{corollary}{unique smallest $\sigma$-algebra containing a collection of subsets}
    Given $\varepsilon  \sub \cP(X)$
    $$
    <\varepsilon> := \intsec_{\varepsilon  \sub S \sub \cP(X), \newline S \text{ is }\sigma \text{ -algebra on } X} S
    $$
\end{corollary}

\begin{definition}{$\sigma$-algebra generated by a subset}
We call  $$
    <\varepsilon> := \intsec_{\varepsilon  \sub S \sub \cP(X), \newline S \text{ is }\sigma \text{ -algebra on } X} S
    $$ \textbf{the $\sigma$-algebra generated by $\varepsilon$ }
\end{definition}



\chapter{Borel $\sigma$-algebra on $\bR$ and measure}
\noindent Recall: the $\sigma$-algebra generated by $\varepsilon$
    $$
    <\varepsilon> := \intsec_{\varepsilon  \sub S \sub \cP(X), \newline S \text{ is }\sigma \text{ -algebra on } X} S
    $$ is the smallsest $\sigma$-algebra containing $\varepsilon$.


\begin{example}
\begin{equation}
    <\{ E\}> = \{ \emptyset, E, E^c, X       \}
\end{equation}
\end{example}


\begin{lemma}
\begin{enumerate}
    \item if $\cE \sub \cA$ where $\cA$ is a $\sigma$-algebra, then $<\cE> \sub \cA$.
    \item if $\cE \sub \cF$, then $<\cE> \sub <\cF>$.
    \item if $\cE \sub <\cF>$, then $<\cE> \sub <\cF>$.
\end{enumerate}
\end{lemma}
\begin{proof}
    trivial.
\end{proof}

\begin{definition}{Borel $\sigma$-algebra defined on a topological space}
For topological space $(X, \cT)$, we define:
$$
\cB_X := <\cT>
$$
\end{definition}
\noindent \textbf{Borel $\sigma$-algebra} on a topological space 就是 $\sigma$-algebra generated by the topology. Its members are called \textbf{Borel sets}. 当然, 所有的 open sets 和 closed sets 都是 Borel sets.




\section{generating Borel $\sigma$-algebra on $\bR$}
\begin{example}
    Let
    $\cE_1 $: $\bR$ 上所有的 open intervals; \\ 
    $\cE_2 $: $\bR$ 上所有的 closed intervals;\\
    $\cE_3 $: $\bR$ 上所有的左开右闭 intervals;\\
    $\cE_4 $: $\bR$ 上所有的左闭右开 intervals;\\
    $\cE_5 $: $\bR$ 上所有的左开右无界 intervals;\\
    $\cE_6 $: $\bR$ 上所有的左闭右无界 intervals;\\
    $\cE_7 $: $\bR$ 上所有的左无界右开 intervals;\\
    $\cE_8 $: $\bR$ 上所有的左无界右闭 intervals;\\
    $\union_{i=1,\cdots,8}\cE_i$ 即 $\bR$ 上的所有形式的 interals.
\begin{lemma}
    任意以上 $\cE_i, i=1,\cdots,8$ 都可以 generate $\cB_{\bR}$
\end{lemma}
\begin{proof}
    我们 recall: 所有的 countable 以及 second countable 的 topological space 都具有 \textbf{Lindelöf property}: 任意 open covering 都存在一个 countable 的 subcovering.\\
    Lindelöf property 的一个推论就是, 在具有 Lindelöf property 的 metric space 或者 second countable 的 space 中, 任意 open set 都可以写成 countable 个 open balls 的 union.\\
    我们在 elementary 的 real analysis 中已经学过, $[a,b) = \cap_{n \geq 1}(a-1/n, b)$, 以其作为例子, 这些 intervals 彼此之间都可以相互转换.
\end{proof}
\end{example}




\section{measure}
\begin{definition}{measurable space and measure space}
    Let $X$ be a set, $\cM$ be a $\sigma$-algebra on $X$.\\
    A measure on $(X,A)$ is a function $\mu: \cM \rar [0, \infty)$ satisfying:
    \begin{enumerate}
        \item $\mu(\emptyset) = 0$
        \item countable additive: 
        $$
        \mu(\union_{i=1}^\infty E_i) = \sum_{i=1}^{\infty} \mu(E_i)  
        $$ for disjoint seq of $E_i \in \cM$.
    \end{enumerate}

    如果这样的 $\mu$ 存在, 我们则称 $(X,\cM)$ 为一个 measurable space, 并称 $(X,\cM, \mu)$ 为一个 measure space.
\end{definition}
\begin{remark}
    一个 probability space 就是一个 measure space, satisfying $\mu(X) = 1$.
\end{remark}

\begin{example}
\begin{enumerate}
    \item 对于任意的 $(X, \cM)$, 我们可以定义:
    $$
    \mu(A) := \#A \;\;\;(\in \bZ_{\geq 0} \cup \{\infty \})
    $$
    这个 measure 叫做 \textbf{counting measure}.
    \item 
    Fix $x_0 \in M$, 可以 define
    $$
    \mu(A) := \delta_x := \begin{cases}
        1 \; \text{, if } x_0 \in A \\
        0 \; \text{, if } x_0 \not\in A \\
    \end{cases}
    $$
    这个 measure 叫做 the \textbf{Dirac measure at $x_0$}.
    \item 
    给定一个 $X$ 上的函数 $f: X \rar [0, \infty)$, 我们可以通过这个函数来定义:
    $$
    \mu(A) := \sum_{x \in A} f(x)
    $$
    这个测度依赖于函数值来表示每个点的单点集的 measure, 并通过一个集合上所有点的单点集 measure 相加得到这个集合在这个函数下的 measure. (缺点: 我们已经知道, 如果一个函数在一个集合上的正集是 uncountable 的, 那么这个集合上的这个测度一定是 $\infty$.)
    \end{enumerate}
\end{example}



\noindent 以下是 measure function 由它的定义的两条性质(空集为0以及 ctbl additivity)推导出的一些基本性质:

\begin{lemma}{measure is finitely additive}
    Measure is finitely additive.
\end{lemma}
\begin{proof}
    显然, ctbl additive implies finite additive.
\end{proof}

\begin{remark}
    反向则不成立. 这让我们想起: Jordan measure 和 Lebesgue measure. 
\end{remark}

\begin{lemma}
    $A,B\in \cM \implies$
    $$
    \mu(A) + \mu(B) = \mu(A \cap B) + \mu(A \cup B)
    $$
\end{lemma}
\begin{proof}
    $$A \cup B = (A \setminus B) \sqcup (A\cap B) \sqcup (B\setminus A)$$
    而后使用 finite additive 可得. 这是一个 direct corollary of countable additivity.
\end{proof}

\begin{corollary}
    $A,B\in \cM, A\sub B, \mu(A) < \infty \implies$
    $$
    \mu(B\setminus A) = \mu(B) - \mu(A)
    $$
\end{corollary}




\begin{theorem}{properties of measure}
    对于任何 measure space $(X,\cM, \mu)$:
    \begin{enumerate}
        \item \textbf{monotonicity}: $A \sub B \in \cM \implies \mu(A) \leq \,\mu(B)$
        \begin{proof}
            trivial.
        \end{proof}
        \item \textbf{countable subadditivity}: 
        $$
        \mu(\union_{i=1}^\infty A_i) \leq \sum_{i=1}^\infty \mu(A_i)
        $$
        \begin{proof}
            By setting $B_i = A_i \setminus \union_{j=1}^{i-1} A_j$, 而后通过 ctbl disjoint additivity 与 monotonicity 可得
        \end{proof}
        \item \textbf{continuous from above}: 
        如果 $A_i \sub A_{i+1} \forall i \geq 2\implies $
        $$
        \mu(\union_{i=1}^{\infty}A_i   ) = \lim_{i \rar \infty} \mu(A_i)
        $$
        \begin{proof}
            使用 same trick as 2.
        \end{proof}
        \item \textbf{countinuous from below}:
        如果 $A_i \supseteq A_{i+1} \forall i$ 且存在某个 $j$ 使得 $\mu(A_i) < \infty$, 则
        $$
        \mu(\intsec_{i=1}^{\infty}A_i) = \lim_{n \rar \infty} \mu(A_n)
        $$
        \begin{proof}
            前面的都无视, 直到第一个 measure $< \infty$ 的集合, 是可能出现在最后的 intersection 里的最大集合. 我们 Fix 这个 $A_j$. 通过构造补集的方式, 把交转为并, 从而用 (3) 得证.
            Define:
            $
            E_i := A_j \setminus A_i \forall i \geq j
            $
            从而
            $$
            \union_{i=j}^\infty E_i = A_j \setminus (\intsec_{i=j}^\infty A_i)
            $$进而 
            $$
            \mu( \union_{i=j}^\infty E_i) = \mu(A_j) - \mu(\intsec_{i=j}^\infty A_i)
            $$
            进而 by (3)
            $$
            \mu(\intsec_{i=1}^\infty A_i) = \mu(\intsec_{i=j}^\infty A_i) = \mu(A_j) - \lim_{i\rar \infty}\mu(E_i)  = \mu(A_j) - \lim_{i\rar \infty}(\mu(A_j) - \mu(A_i))
            = \lim_{i\rar \infty} A_i
            $$
            
        \end{proof}
    \end{enumerate}
\end{theorem}



\chapter{complete measure space and outer measure}

\begin{definition}{nul set, subnull set, almost everywhere}
对于 measure space $(X, \cM, \mu)$
\begin{enumerate}
    \item 我们称 $A \in \cM$ 为一个 \textbf{null set}, 如果 $\mu(A) = 0$;
    \item 我们称 $B \sub \cM$ 为一个 \textbf{subnull set}, 如果存在某个 null set $A$ containing it.
    \item 我们称一个 statement about $X$ 是 \textbf{almost everywhere (a.e.)} 的, 如果这个 statement 除了在某个 null set 上之外, 在 $X$ 上处处成立.
\end{enumerate}
\end{definition}


\begin{definition}{complete measure space}
    我们称 $(X,\cM, \mu)$ 是一个 complete measure space, 如果它其中的任意 subnull set 都是 null set. (即它 measurable)
\end{definition}
\begin{remark}
    我们知道, 根据 measure 的 monotonicity, subnull set 的 measure, 如果存在, 一定是 $\leq$ 它所在的 null set 的, 即一定 $=0$. 所以 complete measure space 的实际意思是： 这个 measure space 里, 任意 null set 的所有子集都是 measurable 的, 即所有足够小的集合都在这个 $\sigma$-algebra 里.
\end{remark}




\begin{example} 一个 not complete 的 measure space 的例子:
$$
X = \{1,2\}, \cM = {\emptyset, X}, \mu(\forall) = 0.
$$
这个例子中, $\{1\}, \{2\}$ 这两个集合不是 measurable 的, 但是却是 nullset (全集) 的子集.
\end{example}



\begin{theorem}{every measure space can be completed}
    Suppose $(X, \cM,\mu)$ is a measure space.\\
    Let 
    \[
    \cN := \{\text{all null sets in }   \cM \}
    \]
    Claim:
    \[
    \ol{M}  := \{   E\cap F \mid E \in \cM, F \sub N \text{ for some } N \in \cN \}
    \]
    is a $\sigma$-algebra, 并且在 $\ol{\cM}$ 上存在一个 unique 的 extension $\ol{\mu}$ of $\mu$.
\end{theorem}
\begin{proof}
    这一部分的 proof 以及 remark 在 hw2. 这里, $\overline{M}$ 称为 \textbf{completion of $\cM$ with respect to $\mu$}, 以及 $\overline{\mu}$ 称为 \textbf{completion of $\mu$.}
\end{proof}




\section{outer measure}
\begin{definition}{outer measure}
    An outer measure on $X$ is a function $\mu^*: \cP(X) \rar {0,\infty)}$ such that
    \begin{enumerate}
        \item $\mu(\varnothing) = 0$
        \item monotone ($A \sub B \implies \mu^*(A) \leq \mu^*(B)$)
        \item countable subadditive ($\mu^*(\union_{i=1}^\infty E_i)  \leq \sum_{i=1}^\infty \mu^*(E_i)$)
    \end{enumerate}
\end{definition}
\begin{remark}
    我们对比 measure 和 outer measure 的定义:
    measure 的条件比 outer measure 强在:
    \begin{enumerate}
        \item measure 是定义在一个严格的 $\sigma$-algebra 上的, 而 outer measure 则是定义在整个幂集上的. 
        \item measure 要求 disjoint countable additivity, outer measure 并不要求
    \end{enumerate}
\end{remark}

在这两个条件的缩减下, 我们规定 outer measure 具有 monotonicity 和 countable subadditivity. 注意: measure 本身也有这个性质, 这是 measure 的 countable additivity 的推论. \\
outer measure 的意义在于, 我们的 measure 只定义在 $\sigma$-algebra 上, 而我们想要给每个子集都赋予一个近似于测度的东西. 

\section{construct outer measure out of a "elementary length function"}
\begin{theorem}{construct outer measure out of an "elementary  length function" }\label{construct outer measure out of a "elementary length function"}
    另 $\cE \sub \cP(X)$ 为一个包含 $\varnothing, X$ 的集合, 并定义 $\rho: \cE \rar [0,\infty)$ 为一个满足 $\rho(\varnothing) = 0$ 的函数, 则
\[
\mu^*(A )  = \inf \{    \sum_{i=1}^\infty \rho(E_i) \mid E_i \in \cE \text{ for each i and }  A \sub \union_{i=1}^\infty E_i    \}
\]
is an outer measure.
\end{theorem}
\begin{proof}
\begin{enumerate}
    \item 取所有 $E_j = \varnothing$, 得到 $\mu^*(\varnothing) = 0$
    \item monotonicity 显然, 因为如果 $A \sub B$, 那么 $A$ 取 inf 的这个集合是包含于 $B$ 的, 因而取到的 inf 是小于等于的.
    \item  证明 ctbl subadditivity, 我们使用经典的 $\epsilon  / 2^i$ argument. 这个 statement 直观上是显然的, 因为对一个 seq of sets, 每一个里面都有一个 seq of covering, 那么这个 seq of seq of covering 总体也是这个 seq union 的一个  covering. 不过我们不能这么说, 因为这里有一个 inf 操作的换序. 所以我们令 $\epsilon >0$, 对于每个 $A_i$ 的 covering $(E_{i,k})_{k\in\bN}$, 我们令 $\sum_k \rho(E_{i,k}) \leq \mu^*(A_i) + \epsilon / 2^i$,  最后可以得到 $\mu^*(\union_i A_i) \leq \sum_i \mu^*(A_i)$. 由于 $\epsilon$ arbitrary, 得证.
\end{enumerate}
\end{proof}
\begin{example}
    我们取 $\cE$ 为 $\bR$ 上所有的 intervals, 并取 $\rho $ 为 interval 的 length, 就得到了一个外测度. (也就是 Lebesgue outer measure)
\end{example}





\chapter{$\mu^*$-measurability and Carathéodory's Theorem}


\section{$\mu^*$-measurable}
\begin{definition}{$\mu^*$-measurable}
    Given outer measure $\mu^*$, 我们称 $A \sub X$ 是 $\mu^*$-measurable 的, if:
    $$
    \mu^*(E) = \mu^*(E \cap A) + \mu^*(E \cap A^c)
    $$
\end{definition}
\begin{remark}
countable subadditivity 蕴含的信息是: 如果我们把一个集合 divide 成几部分, \textbf{其 outer measure 有可能 increase.}  而 $\mu^*$-measurable 的含义是: 任何一个其他集合, 分割为和 $E$ 重合以及和 $E$ 的两部分之后, 其 measure 都不会增大.\\
\noindent \textbf{Note: }\textbf{by subaddivity, must have $\mu^*(E) \leq \mu^*(E\cap A) + \mu^*(E\cap A^c)$}, 而 $\mu^*$-measurable 的集合, 则有 equality 总是成立.\\
\noindent 同时注意: 这个行为对于 complement 是对称的.
\end{remark}

\begin{remark}
 outer measure 是对于整个 power set 中每一个集合都赋予的, 并且其性质 ctbl subadditivity 严格弱于 countable additivity. 
 我们自然想到: 是否有一个 power set 的子集, 其不仅是一个 $\sigma$-algebra, 并且其上满足 countable additivity? 如果存在, 那么我们就从 outer measure induce 出了 measure. 
 \\ \noindent 再加上之前的用随意的 length function 来 induce outer measure 的方法, 我们就可以通过一个随意的 length function $\rar $ outer measre $\rar$ measure. (eg: 从 box length induce 出 Legesgue outer measure, 再 induce 出 Lebesgue measure).\\
 \noindent 而实际上这个想法是正确的. 只要把 $\mu^*$ 的范围限制在所有 $\mu^*$-measurable sets 上, 就形成了 $\sigma$-algebra, 并且其 restriction 是一个 measure,  甚至是一个 complete measure.
\end{remark}

\section{Carathéodory's Theorem}

\begin{theorem}
对于任意的 outer measure $\mu^*$, 
\[
\cM := \{ \text{all } \mu^* \text{-measurable sets}    \}
\]\textbf{is a $\sigma$-algebra}.\\
并且, $\mu^* |_\cM$ \textbf{is a complete measure.}
\end{theorem}
\begin{proof}
我们首先证明这个 $\cM$ 是一个 $\sigma$-algebra
\begin{enumerate}
    \item  $\varnothing \in \cM$ by def.
    \item $\cM$ closed under complement, by def of $\mu^*$-measurablity. (它对于 complement 是对称的.)
    \item 为证明 $\cM$ closed under countable union, 我们首先 prove it for two sets.
    假设 $A, B \in \cM$, 且 disjoint. 
    Let $E \sub X$.
    我们已知 
    \begin{equation}
        \mu^*(E) = \mu^*(E \cap A) + \mu^*(E \cap A^c)
    \end{equation}
 \textbf{我们 WTS: $\mu^*(E) = \mu^*(E \cap (A\cup B)) + \mu^*(E \cap (A\cup B)^c)$}\\
\noindent 我们对于 $E \cap A$, $E\cap A^c$ 可以得到: \begin{equation}
    \mu^*(E \cap A) = \mu^*(E \cap A \cap B) + \mu^*(E \cap A \cap B^c)
\end{equation}
\end{enumerate}
\begin{equation}
    \mu^*(E \cap A^c) = \mu^*(E \cap A ^c\cap B) + \mu^*(E \cap A^c \cap B^c)
\end{equation}

By  $A \cup B = (A \setminus B) \sqcup (A\cap B) \sqcup (B\setminus A)$, 可以得到:
\begin{equation}
   \mu^*(E \cap (A\cup B)) \geq \mu^*(E \cap A \cap B) + \mu^*(E \cap A \cap B^c) + \mu^*(E \cap A^c \cap B)
\end{equation}
结合以上四个 equations 可以得到
\begin{equation}
    \mu^*(E) \geq \mu^*(E\cap (A\cup B)) + \mu^*(E\cap (A \cup B^c))
\end{equation}
又 $\leq$ by countable subadditivity 成立, 我们得证 closed under two union (从而 inductively closed under any finite union, $\cM$ 因而是一个 algebra).\\
\begin{remark}
    (Note: 这里我会想: 证明了这个 statement for any union of two sets 不就是证明了它对 any union 都成立吗? 实则不然, 因为 set union 的从属关系并不是可以从对任意 $n$ 成立推广到对无穷成立, 因为这里的无穷是一个真实存在的 sequence, 而我们可以从"任意 $n$ 成立推广到对无穷成立" 的是比较数值大小, 因为 infinite series sum 的定义就是 limit, 而 set union 并没有 limit. 所以这里不能够直接得证.)\\\\
\end{remark}
\noindent (Continuing the proof:)
\noindent 现在我们再把这个 closed under finite union 推广到 closed under countable union, 以映证 $\cM$ 是一个 $\sigma$-algebra. 注意到 \textbf{STS (suffices to show): $\cM$ closed under countable disjoint union}. 因为任意不 disjoint 的两个集合都可以拆分成三个 disjoint 的集合.\\
\noindent 我们令 $(A_i)$ 为一个 $\cM$ 中的 disjoint sequence, 并定义 $B_n := \union_{i=1}^n A_i$, 我们由上一步的结论知道, $B_n \in \cM$ for all $n$.  
\noindent Define $B := \union_{i=1}^\infty A_i$,  Let $E\sub X$, WTS: $\mu^*(E ) = \mu^*(E \cap B) + \mu^*(E\cap B^c)$.
\\
\noindent 考虑 $\mu^*(E \cap B_n ) = \mu^*(E \cap B_n \cap A_n) + \mu^*(E \cap B_n \cap A_n^c) = \mu^*(E \cap A_n) + \mu^*(E \cap B_{n-1})$, 因为 inductively 可得到:
\begin{equation}
    \mu^*(E \cap B_n) = \sum_{i=1}^n \mu^*(E \cap A_i)
\end{equation}
\noindent 从而：
\begin{equation}
    \mu^*(E) = \mu^*(E \cap B_n) + \mu^*(E\cap B_n^c) \geq \sum_{i=1}^n \mu^*(E\cap A_i) + \mu^*(E \cap B^c)
\end{equation}
\noindent by monotonicity ($\mu^*(E\cap B_n^c) \geq \mu^*(E \cap B^c)$), 这里是一个 infinite sum, 并且 true for every $n$, 因而可以推广到 infinity, 得到 
\begin{equation}
    \mu^*(E) \geq \sum_{i=1}^\infty \mu^*(E\cap A_i) + \mu^*(E \cap B^c) \geq \mu^*(\union_{i=1}^\infty (E \cap A_i)) + \mu^*(E \cap B^c) = \mu^*(E\cap B) + \mu^*(E \cap B^c) \geq \mu^*(E)
\end{equation}
\end{proof}
\noindent\textbf{This finishes the proof of $\cM$ being a $\sigma$-algebra.} 我们同时发现,  $\mu^*|_\cM$ 是一个 \textbf{complete measure} on $\cM$ 是一个 trivial fact after the proof, 因为 taking $B = E$, 可以得到 
\begin{equation}
    \mu^*(B) = \sum_{i=1}^\infty \mu^*(A_i)
\end{equation}
\noindent 并且 by monotonicity, 对于任意的 $\mu^*(A) = 0$, 任取 $E \sub X$, 都有
\begin{equation}
    \mu^*(E )  \leq \mu^*(E \cap A) + \mu^*(E \cap A^c) = \mu^*(E \cap A^c) \leq \mu^*(E)
\end{equation}
因而
\[
\mu^*(E )  = \mu^*(E \cap A) + \mu^*(E \cap A^c)
\]
得到 $A \in \cM$. 从而得证这是一个 complete measure.\\

\begin{remark}
    证明 Carathéodory's Theorem 的 punchline 在于: 我们令 $(A_i) \in \cM$ be a sequence, $B_n$ be its partial union for $n$ terms, 可以得到$$\mu^*(E \cap B_n ) = \mu^*(E \cap B_n \cap A_n) + \mu^*(E \cap B_n \cap A_n^c) = \mu^*(E \cap A_n) + \mu^*(E \cap B_{n-1})$$, 因为 inductively 可得到:
\begin{equation}
    \mu^*(E \cap B_n) = \sum_{i=1}^n \mu^*(E \cap A_i)
\end{equation}
\noindent 这个 statement 对于 $\cM$ 是 $\sigma$-algebra 以及 $\mu^*|_{\cM}$ 是 measure 的证明都很重要. 我们在 outer measure 的定义中, 只声明了 countable subadditivity, 而我们需要证明的是 countable diskjoint additivity, 也就是需要把不等式变成一个等式. 
\\\noindent 为此我们看到 $\mu^*$-measurable 的定义 (Carathéodory condition) 中的等号, 并从中找到这个等式关系: \textbf{通过 disjoint set sequence 上 inductively 对于前一项使用 Carathéodory condition, 得到 disjoint additivity.}
\end{remark}


\chapter{premeasure and Hahn-Kolmogrov extension Theorem}

\begin{definition}{premeasure}
    
\end{definition}






















\end{document}